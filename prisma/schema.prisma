generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Request {
    id            String   @id @default(cuid())
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt
    first_name_th String?  @unique
    last_name_th  String?  @unique
    first_name_en String?  @unique
    last_name_en  String?  @unique
    nick_name     String?
    ojectives     String?
    email         String?  @unique
    year          Int?
    faculty       String?
    major         String?
    image_path    String?  @unique
    google_id     String?  @unique
    discord_tag   String?
    google_email  String?
    is_approved   Boolean? @default(false)
    email_history Email[]
    tags          Tag[]
}

model Email {
    id           String   @id @default(cuid())
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    title        String?
    content      String?
    to           String?
    is_sent      Boolean? @default(false)
    requestId    String?
    request_user Request? @relation(fields: [requestId], references: [id])
}

model RequestDelete {
    id            String   @id @default(cuid())
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt
    first_name_th String?  @unique
    last_name_th  String?  @unique
    first_name_en String?  @unique
    last_name_en  String?  @unique
    nick_name     String?
    ojectives     String?
    email         String?  @unique
    year          Int?
    faculty       String?
    major         String?
    image_path    String?  @unique
    google_id     String?  @unique
    discord_tag   String?
    google_email  String?
    is_approved   Boolean? @default(false)
}

model Admin {
    id    Int    @id @default(autoincrement())
    email String @unique
}

model Tag {
    id           String    @id @default(cuid())
    createdAt    DateTime  @default(now())
    name         String
    color_id     String?
    color        TagColor? @relation(fields: [color_id], references: [id])
    request_id   String?
    request_user Request?  @relation(fields: [request_id], references: [id])
    tag_type_id  String?
    tag_type     TagType?  @relation(fields: [tag_type_id], references: [id])
}

model TagType {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())
    name      String?   @unique
    tags      Tag[]
}

model TagColor {
    id         String   @id @default(cuid())
    createdAt  DateTime @default(now())
    color_bg   String?
    color_text String?
    tags       Tag[]
}
